{"name":"How To JavaScript","tagline":"Core web development techniques using JavaScript.","body":"#Table of Contents\r\n#####[Getting Started](#)\r\n#####[Module 0: JavaScript Functions](#module-0)\r\n#####[Module 1: Get your ass-ets over here](#module-1)\r\n#####[Module 2: Dependencies and Load Order](#module-2)\r\n#####[Module 3: Synchronous vs. Asynchronous](#module-3)\r\n#####[Module 4: The Art of Debugging](#module-4)\r\n#####[Module 5: Asynchronous JavaScript and XML (AJAX)](#module-5)\r\n#####[Module 6: Templating 101](#module-6)\r\n#####[Module 7: Exposing JavaScript Object Notation (JSON)](#)\r\n#####[Module 8: Design Patterns](#)\r\n#####[Module 9: Memory Management](#)\r\n#####[Module 10: Google Maps API](#)\r\n\r\n<a name='module-0'/>\r\n#Module 0: JavaScript Functions\r\n\r\n JavaScript has no relation to Java, it simply piggy backed off the popularity of Java during the 90's. One of great things about learning JavaScript (and similar object-oriented languages) is that the language skills you develop while writing code end up transcending language barriers. You can use the object-oriented abstraction and apply it to Java, C#, C++, Python, PHP, Ruby and Objective-C albeit a few language specific differences.\r\n \r\nIn JavaScript, functions are the primary work horses of the language. They are roughly equivalent to **methods** in Java. Functions in JavaScript are actually **Function Objects**. When you declare a function like this: \r\n\r\n```js\r\n// a. function declaration\r\nvar sum = function(a,b) {\r\n\treturn a+b;\r\n};\r\n// b. function expression (equivalent to a.)\r\nfunction sum(a,b) {\r\n\treturn a+b;\r\n}\r\n```\r\nYou're actually creating an object of type Function. Your new function,  `sum`, is a Function Object. All Objects in JavaScript have what is called a **prototype** object as part of their makeup. Formally, JavaScript implements **prototypal inheritance**; meaning when you create a Object, you inherit all of the functions and properties defined on the **prototypal chain** of that Object's lineage. \r\n\r\n```js\r\n// sum --> Function.prototype --> Object.prototype --> null\r\n// null represents the end of the prototypal chain.\r\n```\r\n\r\nBecause you've created `sum`, which has the type *Function*, you now inherit all of the methods and properties defined on Function's prototypal chain. This includes the Object.prototype object because Function inherits from Object.  For example:\r\n\r\n```js\r\nsum.length \r\n// outputs 2 - The length property specifies the \r\n// number of arguments expected by the function. \r\n// It's defined on Function.prototype\r\nsum.hasOwnProperty()\r\n// outputs false - hasOwnProperty is defined on \r\n// Object.prototype. You have access to it because \r\n// sum inherits from Object.prototype\r\n```\r\n\r\n###Task 1: Write some functions\r\n---\r\n\r\n1. Open a new tab in your browser and navigate to the URL `http://127.0.0.1:3000/intern`. You should land on the page that says, \"Hello, Costco Intern!\"\r\n\r\n2. Go into the folder structure **HowToJavaScript** and find `intern.js` here: `~\\Desktop\\HowToJavaScript\\js\\intern.js`. Also, find  `intern.html` here: `~\\Desktop\\HowToJavaScript\\views\\intern.html`. Open these in your favorite text editor. I love *Sublime Text* and *Notepad++*. You can easily google and get one of these editors.\r\n\r\n3.   Below the comments in `intern.js`, define a couple functions that\r\n\t\r\n\t**a.** Sum a series. Write a function that takes a single argument, an integer **n**, and successively sums the series of numbers (beginning with 0) up until **n**. \r\n\t```js\r\n\t// example output: sum(5) = 0+1+2+3+4+5 = 15\r\n\t```\r\n\t\t\r\n\t**b.** Sum only odd numbers. Write a function that takes a single argument, an integer **n**, and successively sums the odd series of numbers (beginning with 0) up until **n**.\r\n\t```js\r\n\t// example output: sum(5) = 0+1+2+3+4+5 = 9\r\n\t```\r\n\t\r\n4. Test your functions by refreshing the page in your browser (url is `http://127.0.0.1:3000/intern`). Hit `F12` in Google Chrome. This opens the Chrome Developer Tools. Now press `Ctrl+P` and type `intern.js`. Select this file and see your new functions defined in the interpreter. If the `console` (a place to type and call code) isn't opened, on the top right of the Dev Tools click `open drawer` and the `console` should appear. Type the name of your function and a give it a parameter:\r\n\r\n\t```js\r\n\tkurtsSum(5) // = 15\r\n\t```\r\n\t\r\n###Task 2: Move your functions into their own namespace\r\n---\r\n\r\nA namespace collision happens when the script interpreter has duplicate variable assignments defined by one or more scripts contained within your application.\r\n\r\n```js\r\n// from script1.js\r\nvar work = function() { \r\n\t// do some work\r\n}\r\n\r\n// from script2.js\r\nvar work = function() {\r\n\t// do some work\r\n}\r\n\r\n// namespace collision of the Function Object \r\n// work defined in scripts `script1.js` and `script2.js`. \r\n//The interpreter may pick the wrong function when you call work();\r\n```\r\nNamespace collisions are a real hazard in a modern web application. We can limit these potential hazards by giving a unique namespace to a cohesive body of work. This effectively becomes a **module**. Developers choose to use an assortment of different design patterns when writing JavaScript modules.  Any implementation of a modular pattern not only stops namespace collision but increases portability, readability, and gives a logical structure to a body of work.\r\n\r\n```js\r\nvar SumModule = {\r\n\tsumOfSeries : function(n) {\r\n\t\t// sum the series 0..n\r\n\t},\r\n\tsumOddNumbers : function(n) {\r\n\t\t// sum the odd series 0..n\r\n\t}\r\n}\r\n```\r\nThis represents a **object literal** module pattern. We can now call our functions like this:\r\n\r\n```js\r\nSumModule.sumOfSeries(5) // outputs 15\r\n```\r\nThis is a logical structure for a module that has the functionality of summing a series of numbers in different ways.  The `{}` defines an Object literal. You can define properties on this Object. You can access these properties by using the reference `SumModule` and period `.`, followed by the name of the property you'd like to access.\r\n\r\n1. Move your functions into a object literal module with a unique namespace.\r\n\r\n2. In the Chrome Dev Tools, call your functions using the module that you made.\r\n\r\n<a name='module-1'/>\r\n#Module 1: Get your ass-ets over here.\r\n\r\n\"A **content delivery network** (**CDN**) is a system of distributed servers (network) that deliver webpages and other Web content to a user based on the geographic locations of the user, the origin of the webpage and a content delivery server.\" -Google\r\n \r\nGoogle is sweet. We all know this. Google provides their own CDN for delivering commonly used assets to web developers. The above quote explains what a CDN is in a nutshell. Typically a server that is part of a CDN is *specialized* in delivering static assets. \r\n\r\nWhy would I want a file from somebody elses server? Simply put, requesting a resource from somebody else's web server means less work for your own web server. We're all about saving bandwidth in the web application business. It means less CPU usage, less third party's charge for fetching said assets, and ultimately, faster web applications. \r\n\r\nLets look at some common assets (CSS and JavaScript files) provided by Google:\r\n\r\nEverybody and their mother uses this CDN asset: jQuery.\r\nhttps://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\r\n\r\nIf you click on the above link, you'll make a request to Google's ajax subdomain ajax.googleapis.com asking for the script `jquery.min.js`. Google will return the minified script as the response and you can then leverage a really nifty library known as jQuery. \r\n\r\nFor good measure, here is a CSS file (Cascading Style Sheet) from a different CDN provider:\r\nhttps://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\r\n\r\nSimilarly, when you click on this link, maxcdn returns you the CSS file you requested as a minified CSS file.\r\n\r\nWhat happens when you can't reach a remote file like the above two? Well, its good practice to keep a local copy that your own web server can serve to the user in case Google's URL breaks.  Typically a static file's relative path will look something like this: `HowToJavaScript/js/intern.js`. `/js/` designates the JavaScript directory that we keep all of our JavaScript organized in.\r\n\r\n###Task 1: Dynamically retrieving CSS from a CDN using JavaScript.\r\n---\r\n\r\nSo our `intern.html` page looks pretty ugly, right? We need to fetch the styles sheet (CSS) to support the front end framework we're leveraging named *Twitter Bootstrap*. Twitter Bootstrap was developed by.. Twitter Bootstrap offers a beautiful user interface (UI) for stylistically challenged developers like me. We have the proper Bootstrap specific class attributes in our HTML, we just need the CSS and JavaScript. First the CSS, though.\r\n\r\nThere are a couple of ways of doing this. Typically people like to include CSS directly in the `<head>` element of their HTML like this:\r\n\r\n```html\r\n<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\">\r\n```\r\n\r\nThis is totally fine to do. When the HTML gets rendered by the browser, the styles will be included and things will look pretty. One small problem. This is a sort of speed bump that the browser has to get over before getting to the point where it tells our scripts: \"Hey, I'm ready for you to manipulate me.\" (That's not weird, right?). The faster we can produce the document object model (the interpreted tree generated by the browser reading the HTML) to our scripts, the faster the speed of our web application. On top of the speed, Google will score your page higher based on this concept alone.\r\n\r\nAlthough we don't do this on Costco.com/.ca, we're going to do it for our project. I'll go through using native JavaScript to dynamically fetch a file that doesn't block the rendering process.\r\n\r\n1. We need a function.\r\n\t```js\r\n\t// write this in intern.js\r\n\t// boilerplate empty function declaration with \r\n\t// two parameters: source and type\r\n\tfunction getFile(source, type) {\r\n\t\r\n\t}\r\n\t```\t\r\n\r\n2. We need the endpoint URL to the CDN asset that we want. In this case, its the bootstrap CSS file. The endpoint is `https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css`.\r\n\r\n3.  Define the body of the function.\r\n\t```js\r\n\tfunction getFile(source, type) {\r\n\t\t// document.createElement creates a element of a specific tag\r\n\t\t// In this case, we need a `link`.\r\n\t\tvar element = document.createElement('link');\r\n\t\t\r\n\t\t// Head is a reference to the <head> tag in the DOM.\r\n        var head = document.getElementsByTagName('head')[0];\r\n\r\n\t\t// Set the link element's type attribute to 'text/css' \r\n        element.type = 'text/css';\r\n\r\n\t\t// Set the link element's rel attribute to 'stylesheet'\r\n        element.rel = 'stylesheet';\r\n\r\n\t\t// Set the link element's href attribute to `source` argument\r\n\t\t// which is a dynamic parameter set when calling our function.\r\n        element.href = source;\r\n\r\n\t\t// Append (or insert) this element into the <head>\r\n        head.appendChild(element);\t\r\n\t}\r\n\t```\r\n\tSweet. You've essentially created a dynamic way of retrieving a CSS file from a `source` without blocking the rendering of the page\r\n\r\n4. Now we need to call our function using the CDN resource from step 2. Go to your workspace: `http://127.0.0.1:3000/intern` and refresh. Find our function by typing `F12`, `CTRL+P` and then `intern.js`. You should see it defined. Now call the function from the `console`:\r\n\t```js\r\n\tgetFile('https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css');\r\n\t```\r\nNow that's a little better! The page doesn't look so ugly anymore but its not perfect. If you `Right Click` and `Inspect Element`, find the `<head>`. Look closely and you'll see that you've successfully allocated a style sheet. You should see this in the head:\r\n\t```html\r\n\t<link type=\"text/css\" rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\">\r\n\t```\r\nThis bootstrap template requires some more CSS not located in the CDN resource. The local file is located at: `HowToJavaScript/css/cover.css`. We need the file `cover.css` as well. Lets use our function\r\n\t```js\r\n\tgetFile('/css/cover.css');\r\n\t```\r\nWow, that's pretty.\r\n\r\n###Task 2: Dynamically retrieving JavaScript from a CDN using JavaScript.\r\n---\r\n\r\nNow that we have a pattern for retrieving CSS using our `getFile` function, lets reuse the same function to retrieve some JavaScript from a CDN.  Let's just go ahead and get jQuery. jQuery is a framework for *querying* the DOM using less characters in our code. For example:\r\n\r\n```js\r\n// Native JavaScript\r\nvar element = document.getElementById('someElementId');\r\n```\r\nCompare this to:\r\n\r\n```js\r\n// Using the jQuery framework\r\nvar element = $('#someElementId')[0];\r\n```\r\n\r\nThe jQuery **selector** `$('')` is a powerful abstraction that can significantly reduce the amount of code a developer has to write to achieve something. The above example is trivial, however, because it doesn't really demonstrate the power of jQuery. Here's some HTML:\r\n\r\n```html\r\n<div>\r\n\t<ul class='list'>\r\n\t\t<li>Chuck Norris</li>\r\n\t\t<li>Bruce Lee</li>\r\n\t</ul>\r\n</div>\r\n```\r\nThe above data structure represents an unordered list of the names \"Chuck Norris\" and \"Bruce Lee\". Say I want to do something dumb like create a function that retrieves the names. I'll demonstrate this using native JavaScript and jQuery.\r\n\r\n```js\r\n// Native JavaScript function to return the names as an array that can be used later\r\nfunction getNames(className) {\r\n    var classList = document.getElementsByClassName(className);\r\n    var names = [];\r\n    for (var i = 0; i < classList.length; i++) {\r\n        var listItems = classList[i].children;\r\n        for (var j = 0; j < listItems.length; j++) {\r\n            names.push(listItems[j].innerHTML);\r\n        }\r\n    }\r\n    return names;\r\n}\r\ngetNames('list'); // returns an array of strings [\"Chuck Norris\", \"Bruce Lee\"]\r\n```\r\n\r\nHere you have a loop and a nested loop to do the simple task of retrieving those values. Compare that with the jQuery equivalent:\r\n\r\n```js\r\n// jQuery implementation of the same function\r\nfunction getNames(className) {\r\n\tvar names = [];\r\n\t$('.'+className+' li').each(function(i, elem) {\r\n\t\tnames.push(elem.innerHTML);\r\n\t});\r\n\treturn names;\r\n}\r\n\r\n```\r\n\r\nThe jQuery selector allows you to select put the `li` element (the descendent of `<ul class='list'>`) directly in the selector aka `$('.list li')`. So you immediately have access to the list items. There is no need for the nested loop to retrieve the `li` elements.\r\n\r\nSo why would you ever want to write native JavaScript? Because it executes **MUCH** faster! Fan boys will always argue readability of code and the expressivity jQuery offers over writing native JavaScript. They're right and they're wrong. Readability and expressivity are important, but so is performance. The end user is not a developer.\r\n\r\nI'm one of those elitists who likes performance. However, I'll admit that learning JavaScript can more easily be learned by learning jQuery. So lets get it.\r\n\r\n1. Refactor your `getFile(source, type)` function from `intern.js` to accept a type of either `'css'` or `'script'`. You'll need to use a Boolean conditional operator to check the value of the parameter `type` and adjust your code accordingly.\r\n\r\n2. Now that your function is ready to append a script to the `<head>`, include jQuery using this CDN endpoint https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js.\r\n\r\n3. Write a function, `changeLead(text)` using the jQuery selector to change the lead text inside `intern.html` from `Will you please style me? I feel so naked without my styles.` to `I have my styles now, I'm so comfy and warm`.\r\n\r\n4. Create a Object Literal Module to encapsulate your `getFile` and `changeLead` functions. Call the Object `DOMUtils`. Experiment calling your `changeLead` function from the `DOMUtils` module.\r\n\r\n<a name='module-2'/>\r\n#Module 2: Dependencies and Load Order\r\n\r\nThis module will discuss the importance of loading JavaScript assets in the right order based on their dependencies. A JavaScript dependency means that your script is *dependent* on a particular JavaScript asset to be loaded before running correctly. This is an important thought to keep in your mind while you develop your application as having access to your dependencies is essential.\r\n\r\nSo far our `intern.js` file should look something like this:\r\n\r\n```js\r\nvar SumModule = {\r\n\tsumSeries : function(n) {\r\n\t\tvar total = 0;\r\n\t\tfor (var i = 0; i <= n; i++) {\r\n\t\t\ttotal += i;\r\n\t\t}\r\n\t\treturn total;\r\n\t},\r\n\tsumOddSeries : function(n) {\r\n\t\tvar total = 0;\r\n\t\tfor (var i = 0; i <= n; i++) {\r\n\t\t\tif (i % 2 == 1) {\r\n\t\t\t\ttotal += i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn total;\r\n\t}\r\n}\r\nvar DOMUtils = {\r\n\tgetFile : function(source, type) {\r\n\t    var head = document.getElementsByTagName('head')[0],\r\n\t\t    element = null;\r\n\t\tif (type == 'css') {\r\n\t\t    element = document.createElement('link'); \r\n\t\t    element.type = 'text/css';\r\n\t\t    element.rel = 'stylesheet';\r\n\t\t    element.href = source;\r\n\t\t} else {\r\n\t\t\telement = document.createElement('script');\r\n\t\t\telement.src = source; \r\n\t\t}\r\n\t\thead.appendChild(element);  \r\n\t},\r\n\tchangeLead : function(text) {\r\n\t\t$('#lead-text').html(text);\r\n\t}\r\n}\r\n```\r\n\r\nCan you spot the dependency? Because the `changeLead` function leverages jQuery, it is *dependent* on jQuery being loaded to your page before it can be executed. So what do we do? The simple answer is to *not* use jQuery but maybe that isn't a suitable solution based on your developmental needs. Maybe you just joined a team that does leverage jQuery. Lets make a small loader function that can load all of our assets in the proper order.\r\n\r\n###Task 1: Create a loader for loading our dependencies\r\n---\r\nAn **Array** in JavaScript is a data structure that can hold a series of multi-valued elements. We can make arrays in a couple of different ways.\r\n```js\r\n// Using the Array constructor:\r\n// looks similar to Java\r\nvar coolDudes = new Array(\"Chuck Norris\", \"Bruce Lee\");\r\n\r\n// Using Array literal notation:\r\n// equivalent to the above; just short hand\r\nvar coolDudes = [\"Chuck Norris\", \"Bruce Lee\"];\r\n\r\n// Implicitly creating an array:\r\n// the function `split` returns an array.\r\nvar stringOfDudes = \"Chuck Norris-Bruce Lee\";\r\nvar coolDudes = stringOfDudes.split('-');\r\n```\r\n\r\nWe need to define a new function that we can call when we arrive at our web application (`intern.html`). I'm sick of having to call our function `getFile` every time I want to look at our pretty version of `intern.html`. \r\n\r\n1. Define a function on `DOMUtils` called `loadAssets(assets)` that accepts an array of objects that will represent our list of assets that we need to load.\r\n\r\n\t```js\r\n\tloadAssets : function(assets) {\r\n\t\t// get our assets\r\n\t}\r\n\t```\r\n\t\t\r\nWe need to once again refactor our `getFile` function so that it accepts an **Event Listener**. *Events* are \"things\" that happen to HTML elements. When JavaScript is used in HTML pages, JavaScript can \"react\" on these events. We're going to leverage the native function, `document.addEventListener` to attach a \"onload\" event to the assets we dynamically fetch with our `getFile` function.\r\n\r\nIn this context, we need to make sure that jQuery is loaded before we do anything that involves calling the `changeLead` function as part of our script.  Refactor your `getFile` function to accept a **callback** function and to use `document.addEventListener`.\r\n\r\n```js\r\n// Delta (change) to parameters list\r\ngetFile : function(source, type, callback) { \r\n    var head = document.getElementsByTagName('head')[0],\r\n\t    element = null;\r\n\tif (type == 'css') {\r\n\t    element = document.createElement('link'); \r\n\t    element.type = 'text/css';\r\n\t    element.rel = 'stylesheet';\r\n\t    element.href = source;\r\n\t} else {\r\n\t\telement = document.createElement('script');\r\n\t\t// Delta - adding load event if the callback gets passed.\r\n\t\tif (typeof callback !== 'undefined') {\r\n\t\t\telement.addEventListener('load', callback); \r\n\t\t}\r\n\t\telement.src = source; \r\n\t}\r\n\thead.appendChild(element);  \r\n}\r\n```\r\n\r\n\"A callback function, also known as a higher-order function, is a function that is passed to another function (let’s call this other function “otherFunction”) as a parameter, and the callback function is called (or executed) inside the otherFunction. A callback function is essentially a pattern (an established solution to a common problem), and therefore, the use of a callback function is also known as a callback pattern.\" -javascriptissexy.com\r\n\r\nSo this essentially sums up what we're doing with the *callback function*. We're literally calling our function `getFile` with three parameters: `source`, a string, `type`, a string, and `callback`, which is a function. The callback function will get executed when the asset we've allocated into the `<head>` tells us, \"Hey I'm done loading\".\r\n\r\nNaturally we'll have to define the callback. Define it on the `DOMUtils` module.\r\n\r\n```js\r\n// We execute this function on the load event of an asset\r\n// We it fires, we're safe to execute our jQuery dependent function.\r\njQueryLoaded : function() {\r\n\tDOMUtils.changeLead(\"I have my styles now, I'm so comfy and warm\");\r\n}\r\n```\r\n\r\nNow lets go back to our `loadAssets` function. We're going to pass an array of objects representing our assets to this guy. We know the parameter `assets` is an Array because we're defining it that way. We can then use functions on the `Array.prototype` Object to help us. In this instance, we'll use a **`forEach`** function on the `asset` array. Its really just shorthand for using a **for loop**.\r\n\r\n```js\r\nloadAssets : function(assets) {\r\n\tassets.forEach(function(assetObj) { \r\n\t\tDOMUtils.getFile(assetObj.source, assetObj.type, assetObj.callback);\r\n\t});\r\n}\r\n```\r\nSo how do we use this function? Well, remember `loadAssets` is going to take an *Array of Objects* which means it'll have a structure like this:\r\n\r\n```js\r\nvar assets = \r\n\t[\r\n\t\t{source: 'cdn endpoint', type: 'script or css', callback: DOMUtils.jQueryLoaded},\r\n\t\t{source: 'cdn endpoint', type: 'script or css', callback: undefined},\r\n\t\t... // more objects if we need them\r\n\t]\r\n```\r\nWe can create a variable called `assets` like the above or we can just call our function with the above data structure straight in our function's parameter to save an unnecessary reference. Finally.. lets load our assets. As a rule of thumb, I like to load my CSS assets vendor first. Meaning I load the Twitter Bootstrap CSS and then followed by my own CSS. This ensures that any customization in the styles of my application get rendered correctly.\r\n\r\nWe wont apply a callback to any other resource aside from the jQuery one, which is the only one we really care about. Its the only dependency. Call this function on last line of `intern.js`. \r\n\r\n```js\r\nDOMUtils.loadAssets([\r\n\t{ \r\n\t\tsource : \"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\",\r\n\t\ttype : \"css\",\r\n\t\tcallback: undefined\r\n\t},\r\n\t{\r\n\t\tsource : \"/css/cover.css\",\r\n\t\ttype : \"css\",\r\n\t\tcallback: undefined\r\n\t},\r\n\t{\r\n\t\tsource : \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\",\r\n\t\ttype : \"script\",\r\n\t\tcallback : DOMUtils.jQueryLoaded\r\n\t}\r\n]);\r\n``` \r\nNow every time you refresh, you should see your pretty `intern.html` page without having to call `getFile` manually for each asset.\r\n\r\n<a name='module-3'/>\r\n#Module 3: Synchronous vs. Asynchronous\r\n\r\n**Asynchronous**: not going at the same rate and exactly together with something else, in particular.\r\n\r\nWell, that's ambiguous. Up until now, we've been loading our jQuery asset synchronously. The following example will demonstrate loading scripts synchronously. We need the Twitter Bootstrap JavaScript that comes with the framework to proceed further, so lets go ahead and pull that asset from a CDN. Our `DOMUtils` module is becoming more useful, right? I need to simply include it in my *array of objects* that is the parameter to our function `loadAssets`.\r\n\r\n```js\r\nDOMUtils.loadAssets([\r\n    { \r\n        source : \"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\",\r\n        type : \"css\",\r\n        callback: undefined\r\n    },\r\n    {\r\n        source : \"/css/cover.css\",\r\n        type : \"css\",\r\n        callback: undefined\r\n    },\r\n    {\r\n        source : \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.jQueryLoaded\r\n    },\r\n    {\r\n        source : \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js\",\r\n        type : \"script\",\r\n        callback : undefined\r\n    }\r\n]);\r\n```\r\nCool. So this successfully loads the Twitter Bootstrap script and we can now take advantage of the numerous features that it offers. Lets switch the positions of the objects that represent jQuery and Bootstrap.\r\n\r\n```js\r\n\t{\r\n        source : \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js\",\r\n        type : \"script\",\r\n        callback : undefined\r\n    },\r\n\t{\r\n        source : \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.jQueryLoaded\r\n    }\r\n```\r\nOpen your Google Dev Tools using `F12`. Select `open drawer` at the top right of the tools. Now refresh a couple times. Eventually you'll notice a JavaScript error thrown by Bootstrap that says:\r\n\r\n`Uncaught Error: Bootstrap's JavaScript requires jQuery`\r\n\r\nWe have a dependency issue. The easy solution is to keep your files in order starting vendor first. This isn't always preferable, however. \r\n\r\nWhat happens if we want to load *everything* asynchronously? Why would you want to load everything asynchronously? Well if a vendor's CDN (like Google) goes down or is slow, your page won't be held up trying to load that resource. Loading your scripts asynchronously increases the speed in which your application loads by preventing **resource blocking**. \r\n\r\nThe solution is to attach a `async` attribute to the script element that you're dynamically allocating in `getFile`. The inherent problem with this method is that if we have two resources that are being fetched in parallel with no order associated, how do we guarantee that the dependency loads *before* the dependee? Here is one strategy:\r\n\r\n###Task 1: Load your assets asynchronously\r\n---\r\n1. Revisit `DOMUtils.getFile(source, type, callback)` and for the condition where we're creating a `<script>` element, give the element an async attribute with value `true`.\r\n\t\r\n\t```js\r\n\telement.async = true;\r\n\t```\r\n2. Run the same `DOMUtils.loadAssets(...)`function a couple times by refreshing the page. This time, the order of the script objects doesn't matter, as we're running everything in parallel. You should eventually get the same error thrown by Twitter Bootstrap:\r\n\r\n\t`Uncaught Error: Bootstrap's JavaScript requires jQuery`\r\n\r\n\tThe solution to this problem is to create a pseudo-synchronous load order of your asynchronous script assets. We need to first load jQuery, test to see if jQuery has indeed loaded, and then load Twitter Bootstrap's JavaScript. This is a necessary strategy because the Bootstrap script is *self-executing* and assumes jQuery's presence within your application when it executes.\r\n\r\n3. Remove the Twitter Bootstrap JavaScript object from your *array of objects* as part of the parameter to `loadAssets`. Modify the `jQueryLoaded` callback in the `DOMUtils` module so that we can test for jQuery's existence before we make a call to get the Twitter Bootstrap JavaScript.\r\n\r\n\t```js\r\n\tjQueryLoaded : function() {\r\n\t\tif (typeof jQuery !== 'undefined') {\r\n\t\t\tDOMUtils.changeLead(\"I have my styles now, I'm so comfy and warm\");\r\n\t\t\tDOMUtils.loadAssets([{\r\n\t\t        source : \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js\",\r\n\t\t        type : \"script\",\r\n\t\t        callback : undefined\r\n\t\t\t}]);\r\n\t\t}\r\n\t}\r\n\t```\r\n\t\r\n\tNotice here that we're marking jQuery's callback property with the above function:\r\n\t```js\r\n\t {\r\n        source : \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.jQueryLoaded\r\n    }\r\n\t```\r\nWe append the script (which has the asynchronous attribute) and when it loads,  jQuery as a module *exports* a **global variable** called `jQuery` and the short hand version, `$`. The `<script>`'s *event listener* `onload` calls our function, `jQueryLoaded`. We've modified our callback function `jQueryLoaded` to test for the existence of the global variable `jQuery`. If the object `jQuery` exists, we're safe to load our dependent scripts! Thus we make another call to `loadAssets` to bring in our Twitter Bootstrap JavaScript. You should no longer get any dependency errors stemming from Bootstrap in the console. Our scripts are ready to rock.\r\n\r\nA quick note about global variables from w3schools: A variable declared outside a function, becomes GLOBAL. A global variable has global scope: All scripts and functions on a web page can access it.\r\n\r\nBe careful of what you define as *global*. Namespace collisions happen when you have too many definitions in the global space. The best practice is to leverage the module pattern we've discussed.\r\n\r\n<a name='module-4'/>\r\n#Module 4: The Art of Debugging\r\n\r\n\"Debugging is a methodical process of finding and reducing the number of bugs, or defects, in a computer program or a piece of electronic hardware, thus making it behave as expected. Debugging tends to be harder when various subsystems are tightly coupled, as changes in one may cause bugs to emerge in another.\" -Wikipedia\r\n\r\nThis module will focus on every developer's favorite thing to do: finding and correcting mistakes in their own code. When you have many moving parts in your application, you're bound to unwittingly create a few bugs. The best advice someone told me was to **unit test** frequently as a strategy to prevent creating bugs in your application. The importance of unit testing cannot be understated.\r\n\r\n\"**Unit testing** is a software testing method by which individual units of source code, sets of one or more computer program modules together with associated control data, usage procedures, and operating procedures, are tested to determine whether they are fit for use.\" -Google\r\n\r\nWe have a little bit of experience unit testing our own script `intern.js`. Remember when we switched the order of the static scripts we were feeding our function `DOMUtils.loadAssets` and determined that loading the Bootstrap script synchronously before the jQuery script caused Bootstrap to throw a dependency error? That was actually a form of *unit testing*. \r\n\r\nThe unit of source code, `loadAssets` was tested to see what would happen if switched that order. We determined there was a dependency error. This would have been a bug had we not corrected it then and there. \r\n\r\nSay we didn't recognize the bug immediately and our script turned into 1000 lines of code. Sometimes the jQuery object did export to the global scope before the Bootstrap script and everything executed fine. Later down the line you notice that Bootstrap is sometimes throwing the dependency error. It may not be immediately apparent that the order in which you loaded those scripts using `loadAssets` was incorrect. This can become a headache to resolve.\r\n\r\nLets say you've written a function that inserts some pictures into the DOM. Its part of the `DOMUtils` module. It might look something like this:\r\n\r\n```js\r\n// We'll use jQuery to insert our HTML\r\ninsertPics : function(arrayOfNames) {\r\n\tvar html = \"\";\r\n\tfor (var i = 1; i < arrayOfNames.length; i++) {\r\n\t\thtml += '<img height=\"140\" width=\"140\" src=\"/imgs/'+arrayOfNames[i]+'.jpg\" class=\"img-thumbnail\">'\r\n\t}\r\n\t$(html).insertAfter('.inner.cover');\r\n}\r\n``` \r\n\r\nPut this function in your `jQueryLoaded` callback function and refresh the page.\r\n\r\n```js\r\njQueryLoaded : function() {\r\n    if (typeof jQuery !== 'undefined') {\r\n\t    DOMUtils.changeLead(\"I have my styles now, I'm so comfy and warm\");\r\n        DOMUtils.loadAssets([{\r\n            source : \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js\",\r\n            type : \"script\",\r\n            callback : undefined\r\n        }]);\r\n        DOMUtils.insertPics(['chuck','arnold','steven','jean']);\r\n    }\r\n}\r\n```\r\nUm? Excuse me I don't see his holiness Chuck Norris even though we called for the local resource `chuck.jpg` in the function! We have ourselves a bug and we want to exterminate it. Lets open our Chrome Dev Tools (`F12`) and locate our script (`CTRL+P` -> type `intern.js`). Locate our function `insertPics` in the file. Insert a breakpoint *inside* the function beginning on the the line\r\n```js\r\nvar html = \"\";\r\n```\r\nFor me this line is line number 64. Simply click on the line number 64. You'll see the number gets highlighted with a blue arrow. You've just inserted a **breakpoint**. \r\n\r\n\"A point in a program that, when reached, triggers some special behavior useful to the process of debugging; generally, breakpoints are used to either pause program execution, and/or dump the values of some or all of the program variables.\" -dictionary.com\r\n\r\n![debug-0](/imgs/debug-0.png)\r\n\r\nThat's exactly what we're about to do. We're going to pause program execution for the purpose of seeing whats going wrong with our function. Refresh the page and observe the program execution *breaking* on our breakpoint. \r\n\r\n![debug-1](/imgs/debug-1.png)\r\n\r\nNow that the program execution has stopped, we can check out the variables that are in scope during the while the function is being called. In the above picture, I'm hovering over the parameter `arrayOfNames`. Clearly, we can see Chuck is in the array but his picture isn't being displayed.\r\n\r\nSet another breakpoint inside the for loop. For me thats line 66. \r\n\r\n![debug-2](/imgs/debug-2.png)\r\n\r\nIn the top right of the debugger you'll see a green \"play\" button. Clicking it makes the script resume execution. We can assume line 64 is cool because its just a variable holding an empty string, `var html = \"\";`. No problem there. Click the \"play\" button. Now we're inside the for loop. Lets take a peak at what variables are in scope. \r\n\r\n- `i` is our index. We use it to fetch the a ith element of our `arrayOfNames`. We set it to 1 initially following `var i = 1;` Type `i` in our console to see the value of i at this point in the loop.\r\n\r\n- `arrayOfNames[i]` represents the value of the element in `arrayOfNames` at position `i`. Type `arrayOfNames[i]` in the console to see the value of `arrayOfNames[i]` at this point in the loop.\r\n\r\nWe see that `i` returns 1. This is expected, we set it to 1 to start the loop. We also see that `arrayOfNames[i]` returns `\"arnold\"` in the console. However, if we type `arrayOfNames`, we see that `\"chuck\"` actually precedes `\"arnold\"` in the list. This is because `\"chuck\"` is at the 0th index of the array. We need to set our index (`i`) in the loop to 0, not 1. This is called a **off-by-one-error (OBOE)**.\r\n\r\nCool we found the bug. We need to first disable or remove our breakpoints before revising our function. Do this by right clicking and selecting \"Remove All Breakpoints\" from the breakpoints pane on the right side of the debugger.\r\n\r\n![debug-3](/imgs/debug-3.png)\r\n\r\nAfter this, hit the play button one more time to allow the script execution to finish. Man I need to see Chuck. Lets revise that function, NOW!\r\n\r\nChange the index in the for loop from `1` to `0`.\r\n\r\n```js\r\n// We'll use jQuery to insert our HTML\r\ninsertPics : function(arrayOfNames) {\r\n\tvar html = \"\";\r\n\tfor (var i = 0; i < arrayOfNames.length; i++) {\r\n\t\thtml += '<img height=\"140\" width=\"140\" src=\"/imgs/'+arrayOfNames[i]+'.jpg\" class=\"img-thumbnail\">'\r\n\t}\r\n\t$(html).insertAfter('.inner.cover');\r\n}\r\n``` \r\n\r\nNow that your function is revised with the correct index, refresh the page. Wow, that's an excellent line up.\r\n\r\n<a name='module-5'/>\r\n#Module 5: Asynchronous JavaScript and XML (AJAX)\r\n\r\nThis module will explain how to use a group of web development techniques called **AJAX**.\r\n\r\n \"With AJAX, web applications can send data to and retrieve from a server asynchronously (in the background) without interfering with the display and behavior of the existing page. Data can be retrieved using the **XMLHttpRequest** object.\" -Wikipedia\r\n\r\n\"XMLHttpRequest is a JavaScript object that was designed by Microsoft and adopted by Mozilla, Apple, and Google.  XMLHttpRequest can be used to retrieve any type of data, not just XML, and it supports protocols other than HTTP (including file and ftp).\" -Mozilla Developer Network\r\n\r\nAJAX presents us with a convenient way to make seamless transitions between divisions of content on a web page or to display relevant data to our users without breaking the perceived continuity of our web application. When I say \"perceived continuity\" I mean the uninterrupted *flow* (or fluidity) of our web application. \r\n\r\nSome newer web applications are opting for the **single-page application** (SPA) approach, where all the necessary code (HTML, JavaScript, CSS) is retrieved on a single page load or all of the relevant resources are dynamically loaded when needed. AJAX helps accomplish this.\r\n\r\nFor example, when you navigate to `http://127.0.0.1:3000/intern`, your browser brings in the following assets: `intern.html` and `intern.js`. We end up including the additional assets with our `loadAssets` function defined in `intern.js` module `DOMUtils`. Those include our cascading style sheets (CSS): `bootstrap.min.css` and `cover.css`; JavaScript: `jquery.min.js` and `bootstrap.min.js`. We're dynamically including those files. Conceptually, this all happens in one load *cycle*.\r\n\r\nNotice that `intern.html` has a *Features* tab. If we defined a page for Features, the URL might look like `http://127.0.0.1:3000/features`. You'd then want to define a `features.html` to correspond with that route, which would be the logical place to put your \"features\" section. You'd have a structure like this:\r\n\r\n**features.html** (you don't have to make this)\r\n```html\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n    <meta name=\"description\" content=\"\">\r\n    <meta name=\"author\" content=\"\">\r\n    <title>How To JavaScript</title>\r\n  </head>\r\n  <body>\r\n    <div class=\"site-wrapper\">\r\n      <div class=\"site-wrapper-inner\">\r\n        <div class=\"cover-container\">\r\n          <div class=\"masthead clearfix\">\r\n            <div class=\"inner\">\r\n              <h3 class=\"masthead-brand\">Features</h3>\r\n              <nav>\r\n                <ul class=\"nav masthead-nav\">\r\n                  <li><a href=\"#\">Home</a></li>\r\n                  <li class=\"active\"><a href=\"#\">Features</a></li>\r\n                  <li><a href=\"#\">Contact</a></li>\r\n                </ul>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner cover\">\r\n            <h1 class=\"cover-heading\">Features</h1>\r\n            <p id='lead-text' class=\"lead\">\r\n\t            I am a unique snowflake. I have great features.\r\n\t        </p>\r\n          </div>\r\n          <div class=\"mastfoot\">\r\n            <div class=\"inner\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <script src='/js/intern.js' async></script>\r\n  </body>\r\n</html>\r\n\r\n```\r\n\r\nThis HTML would be served up to users by your web server when they navigated to `http://127.0.0.1:3000/features`. `features.html` is nearly identical to `intern.html`. Transitioning to `features.html` might imply the following:\r\n\r\n- I need at least some of the same scripts I used in `/intern` to perform tasks for the `/features` section (`jquery.min.js`,`bootstrap.min.js` and `intern.js`).\r\n\r\n- I need at least some of the same stylesheets I used in `/intern` to make the `/features` section look pretty (`bootstrap.min.css` and `cover.css`).\r\n\r\n- I might need unique stylesheets and/or scripts for the `/features` section.\r\n\r\nIf you DO need any of the same stylesheets or scripts between sections and you naively serve the above HTML, you'll force your client (the end user) to make additional requests to resources they already requested and received before. You're also forcing your own server to serve more resources. Even if you have properly set up **client-side caching**, your client at least has to re-render and reinitialize those assets. \r\n\r\nIf the majority of the `features.html` is exactly the same except the meat of the hamburger, we should serve what some call a *partial* view using AJAX.\r\n\r\nHere the only things that *really* changed in `features.html` were\r\n\r\n```html\r\n<h1 class=\"cover-heading\">Features</h1>\r\n<p id='lead-text' class=\"lead\">\r\n\tI am a unique snowflake. I have great features.\r\n</p>\r\n```\r\nand the `active` class attached to the \"features\" list item.\r\n\r\nFirst we need create the actual HTML (what we're calling a *partial*) that we'll serve the user when they perform some action. I've included this HTML in the project directory under `views/partials/home.html`, `views/partials/contact.html`, and `views/partials/features.html`.\r\n\r\nSecond let's look at the XMLHttpRequest JavaScript object and see what we'll need to use. At a minimum, we need to do four things.\r\n\r\nWe need to **create** a XMLHttpRequest object. We need to **open** (or initialize) the request. We need to define a **callback function** to tell the XMLHttpRequest object what to do with the retrieved resource. We need to **send** the request to our server to fetch the resource.\r\n\r\n1. **Create**: \r\n\r\n\t```js\r\n\tvar request = new XMLHttpRequest();\r\n\t```\r\n2. **Open**:\r\n\r\n\t```js\r\n\trequest.open('GET', '/views/partials/features')\r\n\t```\r\n3. **Callback**:\r\n\t\r\n\t```js\r\n\trequest.onload(function() { /* do something with fetched resource */ });\r\n\t```\r\n\r\n4. **Send**:\r\n\t\r\n\t```js\r\n\trequest.send();\r\n\t```\r\n\t\r\nThats it! This will send a request to our server asking it to grab `/views/partials/features.html`. Now lets actually implement this:\r\n\r\n###Task 1: Use AJAX to replace the HTML inside `intern.html` with the partial `features.html`.\r\n---\r\nWe could simply create a function that encapsulated the entire process of making a AJAX request in addition to calling our unique callback function to replace the meat of the HTML with our partial like so:\r\n\r\n```js\r\ngetPartial : function(partial) {\r\n\t// 1. Create\r\n\tvar request = new XMLHttpRequest();\r\n\t\r\n\t// 2. Open\r\n\trequest.open('GET', '/views/partials/'+partial);\r\n\t\r\n\t// 3. Callback\r\n\trequest.onload = function() {\r\n\t\t// Test if our request was successful\r\n\t\tif (request.status >= 200 && request.status < 400) {\r\n\t\t\tvar partialHtmlString = request.responseText;\r\n\t\t\tvar meat = document.getElementsByClassName('inner cover')[0];\r\n\t\t\tmeat.innerHTML = partialHtmlString;\r\n\t\t} else {\r\n\t\t\t// Server responded with an error status.\r\n\t\t\tconsole.log('Error retrieving partial');        \r\n\t\t}\r\n\t};\r\n\t// 4. Send\r\n\trequest.send();\r\n}\r\n```\r\nThis would send a request to the `partial` route and our server is set up to respond with the corresponding HTML. The function looks good but its not reusable! We've **hard coded** a relative URL path in our `request.open` function. Take a look:\r\n\r\n```js\r\nrequest.open('GET', '/views/partials/'+partial)\r\n```\r\n`'/views/partials/'` is a relative path. We'll never be able to use the `XMLHttpRequest` object in a different way even if we wanted to. Its better to generalize this function a little so that we can reuse the `XMLHttpRequest` object without having to duplicate our code. Here we're defining these functions on the `DOMUtils` module.\r\n\r\n```js\r\n// Reusable AJAX request function\r\najaxRequest : function(method, path, callback) {\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open(method, path);\r\n\trequest.onload = callback;\r\n\trequest.send();\r\n}\r\n\r\n// Specific getPartial function that utilizes ajaxRequest\r\ngetPartial : function(partial) {\r\n\tDOMUtils.ajaxRequest('GET', '/views/partials/'+partial, function(event) {\r\n\t\tif (this.status >= 200 && this.status < 400) {\r\n\t\t\tvar partialHtmlString = this.responseText;\r\n\t\t\tvar meat = document.getElementsByClassName('inner cover')[0];\r\n\t\t\tmeat.innerHTML = partialHtmlString;\r\n\t\t} else {\r\n\t\t\tconsole.log('Error retrieving partial');        \r\n\t\t} \r\n\t});\r\n}\r\n```\r\n`ajaxRequest` is an example of a **higher-order function**. \r\n\r\nIn mathematics and computer science, a higher-order function (also functional form, functional or functor) is a function that does at least one of the following:\r\n\r\n-\ttakes one or more functions as an input\r\n-\toutputs a function\r\n\r\nAs you can see by its signature, `ajaxRequest(method, path, callback)` takes a function, `callback` as an input. This allows us to generalize functions that we create so we can get great reuse out of them.\r\n\r\nIf you call `DOMUtils.getPartial('features');` in the console, you'll see that the middle section (the meat) of our *layout* gets the partial `features.html` in place of the original HTML.\r\n\r\nThis is considerably more efficient than simply defining an almost duplicate HTML file called `features.html`, assigning it to the `/features` route and forcing the user to re-download and re-process those assets (CSS, JavaScript, HTML). Especially if our `features.html` only replaces the meat of the layout.\r\n\r\nWhats left is to attach an event to our `Home`, `Features` and `Contact` tabs in `intern.html` to give the user a visual indicator as to what he/she is looking at.\r\n\r\n###Task 2: Interactive Tabs\r\n---\r\nLets define a function that leverages our `getPartial` function when the user clicks `Home`, `Features` or `Contact` on the `DOMUtils` module.\r\n\r\n```js\r\nbindNavigation : function() {\r\n\tvar tabs = document.getElementsByClassName('masthead-nav')[0].children\r\n\tvar getPartial = function() {\r\n\t\tDOMUtils.getPartial(this.id);\r\n\t\tDOMUtils.makeActive(this);\r\n\t\t// History is defined Globally. It'll replace \r\n\t\t// the URL with the partial title.\r\n\t\thistory.replaceState( {} , '', '/'+this.id );\r\n\t}\r\n\tfor (var i = 0; i < tabs.length; i++){\r\n\t\ttabs[i].addEventListener('click', getPartial);\r\n\t}\r\n},\r\nmakeActive : function(element) {\r\n\t// remove the active class (the underline thingy) from all tabs\r\n\tvar tabs = element.parentElement.children;\r\n\tfor (var i = 0; i < tabs.length; i++) {\r\n\t\ttabs[i].classList.remove('active');\r\n\t}\r\n\telement.classList.add('active');\r\n}\r\n```\r\n\r\nLastly, make a call to `DOMUtils.bindNavigation` in your `DOMUtils.jqueryLoaded` function so that it gets called when the page loads. Now refresh `http://127.0.0.1:3000/intern` and watch your navigation work.\r\n\r\n<a name='module-6'/>\r\n#Module 6: Templating 101\r\n\r\n*Templating* is a useful technique for mitigating the amount of static HTML you may need for your web application. Instead of duplicating a bunch of HTML that has the same fundamental structure, you can create one HTML template and expose it using a templating framework that consumes the *dynamic* data.\r\n\r\nFor example, if you have a piece of HTML that needs to be repeatedly used:\r\n\r\n```html\r\n<div class='person-list-item col-md-12'>\r\n\t<div class='col-md-4'>\r\n\t  <h4>Kurt</h4>\r\n\t</div>\r\n    <div class='col-md-4'>\r\n        <label>Title</label>\r\n        <p>Programmer</p>\r\n    </div>\r\n    <div class='col-md-4'>\r\n        <label>Salary</label>\r\n        <p>1000 gbh (gummy bears per hour)</p>\r\n    </div>\r\n</div>\r\n``` \r\n\r\nThis *widget* represents an employee. Maybe you've hard coded this piece of HTML several times to account for all of your employees. Your HTML can suddenly become large and unwieldy. This is a perfect opportunity to use the templating framework defined in **underscore.js**.  Directly from their site:\r\n\r\n\"Underscore is a JavaScript library that provides a whole mess of useful functional programming helpers without extending any built-in objects. It’s the answer to the question: “If I sit down in front of a blank HTML page, and want to start being productive immediately, what do I need?” … and the tie to go along with jQuery's tux\".\r\n\r\nUnderscore provides some very nifty functionality. If you read through their library, you'll see some cross-paradigm functions that can help you be very expressive with the way you write code. In addition, their templating is very elementary to implement. \r\n\r\nFirst of all,  when we include underscore.js in our app `_`, or literally *underscore* is now a global variable that we can expose and use. Similary to `$` (`jQuery`), `_` has a bunch of functions defined as properties. In the below example we use `_.each`, which is essentially underscore's version of `Array.prototype.forEach`. It has an almost identical function definition. The `<%= %>` are tags used by underscore. It parses the content between these tags and allocates our dynamic object property value.\r\n\r\nThere are three things we need to define to make use of this\r\n\r\n1. The **template**: This is the actual template (a text string that converts to HTML) that we'll tell underscore to utilize when it augments the document object model (DOM). It'll look something like this:\r\n\r\n\t```html\r\n\t<% _.each(employees, function(employee) { %>\r\n\t    <div class='person-list-item col-md-12'>\r\n\t        <div class='col-md-4'>\r\n\t          <h4><%= employee.name %></h4>\r\n\t        </div>\r\n\t        <div class='col-md-4'>\r\n\t            <label>Title</label>\r\n\t            <p><%= employee.title %></p>\r\n\t        </div>\r\n\t        <div class='col-md-4'>\r\n\t            <label>Salary</label>\r\n\t            <p><%= employee.salary %> gbh</p>\r\n\t        </div>\r\n\t    </div>\r\n\t<% }); %>\r\n\t```\r\n\t\r\n\t>\tThis template looks a little funky because we need to loop through the *array of objects*. So we use the `_.each` to accomplish this. \r\n\r\n\r\n2. The **data**: This will be an object containing a *property* with the name `employees` and the value of the property being an *array of objects*. The array of objects represents the employees that you want to embed into your templates:\r\n\t\r\n\t```js \r\n\t{\r\n\t\temployees :\r\n\t\t\t[\r\n\t\t\t\t{ name: \"Kurt\", title: \"Programmer\", salary: 1000 },\r\n\t\t\t\t{ name: \"Brian\", title: \"Programmer\", salary: 1500 },\r\n\t\t\t\t{ name: \"Robert\", title: \"Programmer\", salary: 2000 }\r\n\t\t\t]\r\n\t}\r\n\t```\r\n\t\r\n3. The **target**: The place where you want to insert the HTML generated by underscore.\r\n\r\n###Task 1: Using `underscore.js`, build a template that can take an array of objects and insert them into the DOM.\r\n---\r\n\r\nWe'll need to include underscore in our application. Find a CDN and add it to our `loadAssets` function. In `intern.js`, `loadAssets` should look like this:\r\n\r\n```js\r\nDOMUtils.loadAssets([\r\n    {\r\n        source : \"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\",\r\n        type : \"css\",\r\n        callback: undefined\r\n    },\r\n    {\r\n        source : \"/css/cover.css\",\r\n        type : \"css\",\r\n        callback: undefined\r\n    },\r\n    {\r\n        source : \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.jQueryLoaded\r\n    },\r\n    {\r\n        source : \"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\",\r\n        type : \"script\",\r\n        callback : undefined\r\n    }\r\n]);\r\n```\r\nNotice we're creating yet *another* dependency on somebody's library. After this example using underscore, we'll ditch it and write our own very basic templating system.\r\n\r\n1. Define a `buildTemplate` function in `DOMUtils` to initialize building our templates for when underscore loads:\r\n\t\t\r\n\t```js\r\n\tbuildTemplate : function(dataObj, templateName, target) {\r\n\t\t// Get the template string.\r\n\t\tvar template = document.getElementById(templateName).innerHTML;\r\n\r\n\t\t// Generate the HTML necessary by calling _.template with the\r\n\t\t// template and the data object. \r\n\t\tvar generatedHtmlString = _.template(template)(dataObj);\r\n\r\n\t\t// Insert the HTML into the DOM by using the target parameter.\r\n\t\tdocument.getElementById(target).innerHTML = generatedHtmlString;\r\n\t}\r\n\t```\r\n\tThis generalized function allows you to define `dataObj` (object containing the array of objects), the `templateName` (where the template is defined) and the `target` (where you want the template in the DOM) with each call.\r\n\r\n2. Create the template using an inline `<script>` tag within `intern.html`. Place this code just before the `</body>` tag:\r\n\r\n\t```html\r\n\t<script type='text/template' id='employee-template'>\r\n        <% _.each(employees, function(employee) { %>\r\n            <div class='person-list-item col-md-12'>\r\n                <div class='col-md-4'>\r\n                  <h4><%= employee.name %></h4>\r\n                </div>\r\n                <div class='col-md-4'>\r\n                    <label>Title</label>\r\n                    <p><%= employee.title %></p>\r\n                </div>\r\n                <div class='col-md-4'>\r\n                    <label>Salary</label>\r\n                    <p><%= employee.salary %> gbh</p>\r\n                </div>\r\n            </div>\r\n        <% }); %>\r\n    </script>\r\n\t```\r\n\t Notice that we're placing the template contents inside of a `<script>` tag with `type='text/template'`. This type tells the browser not to process this block of text like JavaScript, thus we won't have any issues with those funky `<%= %>` tags.\r\n\r\n3. Create the `underscoreLoaded` callback function and attach it to the `callback` property of the underscore asset when we call `loadAssets`.\r\n\r\n\t```js\r\n\t {\r\n        source : \"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.underscoreLoaded\r\n    }\r\n    \r\n    // and define the function on DOMUtils. Call our DOMUtils.buildTemplate when\r\n    // we load.\r\n\r\n\tunderscoreLoaded : function() {\r\n\t\t DOMUtils.buildTemplate(\r\n            { \r\n                employees : [\r\n                    { name: \"Kurt\", title: \"Programmer\", salary: 1000 },\r\n                    { name: \"Brian\", title: \"Programmer\", salary: 1500 },\r\n                    { name: \"Robert\", title: \"Programmer\", salary: 2000 }\r\n                ]\r\n            },\r\n            'employee-template',\r\n            'employee-list'\r\n        )\r\n    }\r\n\t```\r\n\tLets stop inserting those pictures of our demigods Chuck Norris, Arnold Schwarzenegger, Steven Seagal, and Jean-Claude Van Damme. *Comment* (or make the program skip) this function out of our `jqueryLoaded` function.\r\n\r\n\t```js\r\n\t// DOMUtils.insertPics(['chuck','arnold','steven','jean']);\r\n\t```  \r\nNow refresh `http://127.0.0.1:3000/intern` to see your list represented in HTML\r\n\r\n![template.png](/imgs/template.png)\r\n\r\nPlay around with inserting different data into your utility function by changing the data object to see different employees.\r\n\r\n```js\r\nDOMUtils.buildTemplate(\r\n    { \r\n        employees : [\r\n            { name: \"Jean-Claude Van Damme\", title: \"Kickboxer\", salary: 3500 },\r\n            { name: \"Arnold Schwarzenegger\", title: \"Commando\", salary: 4000 },\r\n            { name: \"Bruce Lee\", title: \"The Dragon\", salary: 5000 }\r\n        ]\r\n    },\r\n    'employee-template',\r\n    'employee-list'\r\n)\r\n```\r\n\r\n###Task 2: Ditch `underscore.js`\r\n---\r\n\r\nWhile underscore is powerful tool set, we don't need it to accomplish what we want. Underscore includes a lot of other stuff we might not ever use, so naively including it is sort of a bad idea. By writing our own JavaScript templating function, we can eliminate the overhead (dependency and bandwidth) of including it.\r\n\r\nFirst we need to do some code cleanup.\r\n\r\n1. Remove the `underscore.js` dependencies. Remove the underscore asset object from the `loadAssets` function.\r\n\r\n\t```js\r\n\t// Remove this!\r\n\t{\r\n        source : \"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\",\r\n        type : \"script\",\r\n        callback : DOMUtils.underscoreLoaded\r\n    }\r\n\t```\r\n\t`DOMUtils.underscoreLoaded` is now **dead code**, which means that it so no longer used by our application. You might want to remove or comment this code out.\r\n\r\n\t```js\r\n\t// underscoreLoaded : function() { \r\n    //     DOMUtils.buildTemplate(\r\n    //         { \r\n    //             employees : [\r\n    //                 { name: \"Kurt\", title: \"Programmer\", salary: 1000 },\r\n    //                 { name: \"Brian\", title: \"Programmer\", salary: 1500 },\r\n    //                 { name: \"Robert\", title: \"Programmer\", salary: 2000 }\r\n    //             ]\r\n    //         },\r\n    //         'employee-template',\r\n    //         'employee-list'\r\n    //     )\r\n    // }\r\n\t```\r\n\tWe can refactor `DOMUTils.buildTemplate` to make it work with our custom templating system.\r\n\r\n2. Remove the `<script type='text/template' id='employee-template'>` that you defined in `intern.html`. The `<%= =>` is no longer useful to us because it is unique syntax relevant only to underscore. \r\n\t\r\n\t```html\r\n\t<!-- Remove this! -->\r\n\t<script type='text/template' id='employee-template'>\r\n        <% _.each(employees, function(employee) { %>\r\n            <div class='person-list-item col-md-12'>\r\n                <div class='col-md-4'>\r\n                  <h4><%= employee.name %></h4>\r\n                </div>\r\n                <div class='col-md-4'>\r\n                    <label>Title</label>\r\n                    <p><%= employee.title %></p>\r\n                </div>\r\n                <div class='col-md-4'>\r\n                    <label>Salary</label>\r\n                    <p><%= employee.salary %> gbh</p>\r\n                </div>\r\n            </div>\r\n        <% }); %>\r\n    </script>\r\n\t```\r\n\t\r\n###Task 3: Build your own templating system\r\n---\r\n\r\nThe same three things are needed in our own custom templating solution:\r\n\r\n1. The **template**: \r\n\r\n\tThis time we'll define our template using just pure JavaScript. The structure of our template is basically the same, we just need a *string* representation of the HTML. We can do this using an array. \r\n\r\n\tLets use a new design pattern that we haven't used before. Lets create a *templates* object using the **prototype pattern**. Similar to our *object literal* `DOMUtils` module, The prototype pattern allows you to encapsulate some unit of work while gaining the benefit of leveraging JavaScript's native support of prototypal inheritance. The prototype object (for example `Function.prototype`) itself is used as a blueprint of each object that the **constructor** creates. Another benefit of this pattern is that defining a function on an object's prototype, all child instances of this object reference a single definition of the function. They don't make copies for each object instance.\r\n\r\n\tLets create a constructor and a prototype for our new object.\r\n\r\n\t```js\r\n\t// Constructor\r\n\tvar Template = function() {};\r\n\t\r\n\t// Defining a function on Template's prototype object\r\n\tTemplate.prototype = {\r\n\t\ttemplate_0 : function(employee) {\r\n\t\t\treturn ['<div class=\"person-list-item col-md-12\">',\r\n\t\t\t\t\t\t'<div class=\"col-md-4\">',\r\n\t\t\t\t\t\t\t'<h4>'+employee.name+'</h4>',\r\n\t\t\t\t\t\t'</div>',\r\n\t\t\t\t\t\t'<div class=\"col-md-4\">',\r\n\t\t\t\t\t\t\t'<label>Title</label>',\r\n\t\t\t\t\t\t\t'<p>'+employee.title+'</p>',\r\n\t\t\t\t        '</div>',\r\n\t\t\t\t        '<div class=\"col-md-4\">',\r\n\t\t\t\t\t        '<label>Salary</label>',\r\n\t\t\t\t\t        '<p>'+employee.salary+' gbh</p>',\r\n\t\t\t\t\t    '</div>',\r\n\t\t\t\t\t'</div>'].join('');\r\n\t\t}\t\r\n\t}\r\n\r\n\t// Usage\r\n\t\r\n\t// Use `new` on our constructor function object.\r\n\tvar template = new Template();\r\n\t\r\n\t// Call the `template_0` function (defined on the object's prototype)\r\n\ttemplate.template_0({ name: 'kurt', title: 'programmer', salary: '1000'});\r\n\t```\r\n\tDefine your Template object outside the scope of `DOMUtils`.\r\n\r\n2. The **data**:\r\n\r\n\tThe data has a slightly different (and more simplistic) structure. We can now represent our data as a simple array of objects.\r\n\t\r\n\t```js\r\n\t[\r\n\t    { name: \"Kurt\", title: \"Programmer\", salary: 1000 },\r\n\t    { name: \"Brian\", title: \"Programmer\", salary: 1500 },\r\n\t    { name: \"Robert\", title: \"Programmer\", salary: 2000 }\r\n    ]\r\n\t```\r\n\r\n3. The **target**:\r\n\r\n\tThe target remains the same, we need to insert the HTML generated by our function into the DOM. \r\n\r\n---\r\n\r\n`DOMUtils.buildTemplate` will be our workhorse again. First we need to strip it of its underscore dependency. Lets refactor `buildTemplate`:\r\n\r\n```js\r\nbuildTemplate : function(dataArray, templateIndex, target) {\r\n\t// An empty variable to fill up with HTML.\r\n\tvar generatedHTML = \"\";\r\n\r\n\t// Instantiate our template Object.\r\n\tvar template = new Template();\r\n\r\n\t// Loop through each object in the dataArray\r\n\tdataArray.forEach(function(object) {\r\n\t\t// Generate HTML for each object in our dataArray\r\n\r\n\t\t// += means append and assign. Its the same thing as saying:\r\n\t\t// generatedHTML = generatedHTML + `new value`. Use the templateIndex\r\n\t\t// to dynamically fetch the function `template_0` from our template\r\n\t\t// object using the notation ['template_' + templateIndex]. This is\r\n\t\t// equivalent to calling template.template_0(object).\r\n\t\t\r\n\t\tgeneratedHTML += template['template_'+templateIndex](object);\r\n\t});\r\n\tdocument.getElementById(target).innerHTML = generatedHTML;\r\n}\r\n```\r\n\r\nPlace the call to `buildTemplate` in the `jQueryLoaded` callback function:\r\n\r\n```js\r\n DOMUtils.buildTemplate(\r\n    [\r\n        { name: \"Kurt\", title: \"Programmer\", salary: 1000 },\r\n        { name: \"Brian\", title: \"Programmer\", salary: 1500 },\r\n        { name: \"Robert\", title: \"Programmer\", salary: 2000 }\r\n    ],\r\n    0, 'employee-list'\r\n);\r\n```\r\n Refresh your `http://127.0.0.1:3000/intern` and watch your templating system work. You've just saved yourself a dependency, sped up your application's execution time, and made your client's experience a little better.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}